1562620658 #jsapi Started converting Cranelift monotarget branch instructions into multitarget, Ion-style branch instructions. Hit a roadblock with the instruction format: EBBs take formal parameters in varargs, and there is no mechanism to separate the varargs into two ValueLists. Will discuss with bbouvier tomorrow.
1562706060 #jsapi Discussed possible branch design, using jump-blocks and no parameters. Read through EBB code; investigated EBB size (EbbData=4, EbbNode=20); talked with nbp about cache locality issues and data structures. Created a WIP bzr2 CLIF IR instruction using the new branch style. Submitted patch to binaryen to fix compilation failures when running
1562706615 #jsapi (continued from previous) ...when running Cranelift tests locally (https://github.com/WebAssembly/binaryen/pull/2211). Got bzr2 passing verifier tests.
1562787617 #jsapi Fixed home Internet connection. Submitted half a year's worth of expense reports. Considered an instruction design proposal from Nicolas -- had the idea also: two people having the same idea means it's maybe not crazy!
1562794080 #jsapi Worked on defining an argument-less BranchInfo::DoubleDest. SSA conversion seems to require critical-edge splitting. Need to read through frontend SSA code very carefully tomorrow.
1562880043 #jsapi Experimented with overloaded explicit arguments for a DoubleBranch: nbp's idea from two days ago, where a single varargs was used to encode two varargs from both EBBs. Ran into walls. Decided that the zero-argument design was fine.
1562965138 #jsapi Got a branch-less DoubleDest instruction passing ./test-all.sh. Started working on codegen tests for bnz2.
